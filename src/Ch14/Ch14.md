# Generics

- Ordinary classes and methods work with specific types: either
  primitive or class types. If you are writing code that might be
  used across more types, this rigidity can be overconstrained.

- Methods to allow generation
    - (1) Polymorphism ---> classes
        The single hierarchy is overconstrained.
    - (2) any class implements ---> interface
        more general code with no specific type
    - (3)                  ---> Generics

## Generics (Parameterized types)

- It means "pertaining or appropriate to large groups of classes."
- The original intent of generics was to allow the programmer 
  the greatest amount of expressiveness possible when writing 
  classes or methods, by loosening the constraints on the types.
- It happens in _compile time_.

## Comparison with C++ (Reason)

- 1.Understanding C++ templates will help you understand the concepts
    and limitation of Generics.
- 2.There is significant misunderstanding about C++ template.

## Simple Generics

- One of the most compelling initial motivation is to create _container_ class.
    - We need a _more reusable container_ holding the _specific type_ of objects.
    - Demo :           Holder1.java                     Holder2.java
- Demo : Holder3.java

- The core idea of Generics is that you tell it what type you want to use, 
    and it takes care of the details.
- When you specify the type in <>, you are only allowed to put objects of that type or subtype,  
    And when you get a value out, it is automatically the right type.
    
### A tuple library (Holder Example 01)

- When you want to return multiple objects from a method call, you need a holder to contain them.
- This concept called tuple : some objects wrapped together.
- When you get the tuple, you can only read the objects however you cannot change them.
- Tuples can be any length, but each object in the tuple can be of a different type.
- However, if we want to specify the type of these objects, the recipient will get the right type.
- Demo : TwoMemTuple.java / ThreeMemTuple.java .... 
- Note
    - 1.final : cannot change members only to create a new tuple (safety)
    - 2.public : client cannot change them because of 1(final)  
                which reducing the getter and setter.

(__Important Note : Why cannot initialize a generics type array?__just like: T[])
- It's because Java's arrays (unlike generics), at runtime, information about its component type.
  So you must know the component type when you create the array. 
  Since you don't know what T is at runtime, you can't create the array.
- And what about ArrayList<T>?  
> Object [] 

### A Stack library (Holder Example 02)

- Demo : LinkedStack.java

- Inner class (_not static_) has access to the generic type parameters of its outer class.
- Exercise05.java


### RandomList (Holder Example 03)

- Suppose you'd like a special list of list that randomly selects one of the elements 
  each time you call select(). When you want to build it into a tool that work s with all objects.
- Demo : RandomList.java

## Generics Interface

- Using generics with interfaces is no different than using generics with classes.
- Demo : Generator.java / CoffeeGenerator.java 

- __Note:The first limitation of Generics in Java : You cannot use primitive as generics parameter.__
- Demo : Fibonacci.java / IterableFibonacci.java / Exercise07


## Generics Methods

- A generic method is _independent_ whether the class is generics.
- It is recommend that we should use generics method whenever we can.

- Usage
    > public [static] <T> void f(T x) { ... }
    > // place the generics before return value
    - No need to specify the parameter type when using the generic methods.
    - However, the static method cannot get generics information in class,
      if you want to use generics in static method, you must define it in the declaration.
    - The parameters of generic method work well with single, multiple and array of params.
    - Demo : GenericMethods.java / Exercise 09/10  / GenericVarargs.java


- ~~Then here we come the second limitation of generics : the type list is too long~~
> ~~Map<Person, List<? extends Pet>> petPeople = new HashMap<Person, List<? extends Pet>>();~~
- ~~Solution : Leveraging type argument inference~~
- Demo : New.java

- ~~Notice that type inference only works in the assignment.~~
- ~~When you return New.map() by a method with param-list, it will just be treated as Object.~~
- ~~Demo : LimitsOfInference.java / ExplicitTypeSpecification.java~~

### A generic method to use with __Generator__

- Demo : Generators.java

### A general-purpose Generator

- Demo : BasicGenerator.java

### Simplifying tuple use

- Demo : Tuple.java / TupleTest.java

### A Set utility



## Anonymous inner classes

- Generics can also work with inner classes and anonymous classes.
- Demo : BankTellerSimulation.java


## Build complex models

- An important benefit of Generics is the ability to 
    simply and safely create complex models.
- Store.java / Exercise19.java


## The mystery of erasure





